---
date: 2025-02-21
tags:
  - python
  - 运算
  - 条件判断
---
## Python支持的运算符

- 算术运算符：+、-、*、/、%等
- 赋值运算符：=
- 成员运算符：in 、not in
- 比较运算符
- 逻辑运算符
- 位运算符
- 身份运算符


### 比较运算符 (返回Boolen值)

| 运算符  | 描述                              | 示例       | 结果     |
| ---- | ------------------------------- | :------- | ------ |
| `==` | 检查两个操作数的值是否相等，如果相等则条件为真。        | `5 == 5` | `True` |
| `!=` | 检查两个操作数的值是否不相等，如果不相等则条件为真。      | `5 != 3` | `True` |
| `>`  | 检查左操作数的值是否大于右操作数的值，如果是则条件为真。    | `7 > 3`  | `True` |
| `<`  | 检查左操作数的值是否小于右操作数的值，如果是则条件为真。    | `2 < 4`  | `True` |
| `>=` | 检查左操作数的值是否大于或等于右操作数的值，如果是则条件为真。 | `5 >= 5` | `True` |
| `<=` | 检查左操作数的值是否小于或等于右操作数的值，如果是则条件为真。 | `3 <= 6` | `True` |
|      |                                 |          |        |

### 赋值运算符

| 运算符   | 描述                                     | 示例                                                          | 等价于          |
| ----- | -------------------------------------- | ----------------------------------------------------------- | ------------ |
| `=`   | 简单的赋值运算符，将右侧表达式的值赋给左侧变量。               | `a = 5`                                                     | -            |
| `+=`  | 加法赋值运算符，将右操作数加上左操作数的结果赋值给左操作数。         | <pre>a = 3  <br>a += 2</pre>                                | `a = a + 2`  |
| `-=`  | 减法赋值运算符，将左操作数减去右操作数的结果赋值给左操作数。         | <pre>a = 5  <br>a -= 1</pre>                                | `a = a - 1`  |
| `*=`  | 乘法赋值运算符，将左操作数乘以右操作数的结果赋值给左操作数。         | <pre>a = 4  <br>a *= 3</pre>                                | `a = a * 3`  |
| `/=`  | 除法赋值运算符，将左操作数除以右操作数的结果赋值给左操作数（结果为浮点数）。 | <pre>a = 10  <br>a /= 2</pre>                               | `a = a / 2`  |
| `//=` | 取整除赋值运算符，将左操作数除以右操作数的整数商赋值给左操作数。       | <pre>a = 11  <br>a //= 2</pre>                              | `a = a // 2` |
| `%=`  | 取模赋值运算符，将左操作数除以右操作数的余数赋值给左操作数。         | <pre>a = 10  <br>a %= 3</pre>                               | `a = a % 3`  |
| `**=` | 幂赋值运算符，将左操作数的右操作数次幂的结果赋值给左操作数。         | <pre>a = 2  <br>a **= 3</pre>                               | `a = a ** 3` |
| `&=`  | 按位与赋值运算符，将左操作数和右操作数进行按位与运算的结果赋值给左操作数。  | <pre>a = 5 # 二进制 101  <br>b = 3 # 二进制 011  <br>a &= b</pre> | `a = a & b`  |

### 逻辑运算符(返回Boolen值)

| 运算符   | 描述                                                                  | 示例              | 结果解释                         |
| ----- | ------------------------------------------------------------------- | --------------- | ---------------------------- |
| `and` | 逻辑与，只有当所有操作数都为 `True` 时，结果才为 `True`，否则为 `False`。                    | `True and True` | 两个操作数都为 `True`，所以结果为 `True`。 |
| `or`  | 逻辑或，只要有一个操作数为 `True`，结果就为 `True`；只有当所有操作数都为 `False` 时，结果才为 `False`。 | `False or True` | 有一个操作数为 `True`，所以结果为 `True`。 |
| `not` | 逻辑非，对操作数的布尔值取反，`True` 变为 `False`，`False` 变为 `True`。                 | `not True`      | 对 `True` 取反，结果为 `False`。     |

### 位运算符

位运算符是对整数在内存中的二进制位进行操作的运算符

| 运算符  | 描述                                                                   | 示例       | 结果   |
| ---- | -------------------------------------------------------------------- | -------- | ---- |
| `&`  | 按位与：对两个操作数的对应二进制位进行与运算，只有当两个对应位都为 1 时，结果位才为 1，否则为 0                  | `5 & 3`  | `1`  |
| `\|` | 按位或：对两个操作数的对应二进制位进行或运算，只要两个对应位中有一个为 1，结果位就为 1，只有当两个对应位都为 0 时，结果位才为 0 | `5 \| 3` | `7`  |
| `^`  | 按位异或：对两个操作数的对应二进制位进行异或运算，当两个对应位不同时，结果位为 1，相同时结果位为 0                  | `5 ^ 3`  | `6`  |
| `~`  | 按位取反：对操作数的每个二进制位取反，即 1 变为 0，0 变为 1。在有符号整数中，结果根据补码规则确定                | `~5`     | `-6` |
| `<<` | 左移：将操作数的二进制位向左移动指定的位数，右边空出的位用 0 填充。左移 n 位相当于将原数乘以 2 的 n 次方           | `5 << 2` | `20` |
| `>>` | 右移：将操作数的二进制位向右移动指定的位数，左边空出的位根据原数的符号位来填充。右移 n 位相当于将原数除以 2 的 n 次方并向下取整 | `5 >> 2` | `1`  |
|      |                                                                      |          |      |


## Tuthy、Falsy值

在条件判断中，所有的对象（python中所有的资料类型都是对象）都可以评估为布尔值

会被评估成True的对象称之为truthy值，反之为falsy值

只需记falsy值是哪些，其余的都是truthy值

### 常见的 Falsy 值类型及具体示例：

#### 1. 布尔类型

- **`False`**：布尔类型中的 `False` 常量本身就是典型的 falsy 值。

#### 2. 空对象

- **`None`**：`None` 是 Python 中表示空或缺失值的特殊对象，它在布尔判断时被当作 `False`

#### 3. 数值类型

- **整数 `0`**

- **浮点数 `0.0`**

- **虚数 `0j`**

#### 4. 空序列和集合

- 空列表: []

- 空元组:()

- 空字典:{}

- 空集合:()

- 空字符串:''

#### 5. 空范围对象
  
- **`range(0)`**：`range` 函数生成一个不可变的整数序列，当参数为 `0` 时，生成的是空序列，属于 falsy 值。

#### 6. 自定义类实例

除了上述这些，Python 中自定义类的实例如果实现了 `__bool__` 或 `__len__` 方法，并且在 `__bool__` 方法中返回 `False` 或者 `__len__` 方法返回 `0`，那么该实例在布尔上下文中也会被视为 falsy 值。

```
class EmptyClass: 
	def __bool__(self): 
		return False 


obj = EmptyClass() 
if obj: 
	print("不会执行") 
else: 
	print("自定义类实例根据 __bool__ 方法返回值成为 falsy 值")
```


### Truthy值

- 非空序列和集合
- 非空数值
- True

## 短路求值（Short-circuit evaluation）
  
短路求值是一种逻辑运算符的求值策略。在使用逻辑运算符（如逻辑与 `and`、逻辑或 `or`）进行布尔表达式计算时，一旦能够确定整个表达式的结果，就会立即停止后续的计算，而不必对表达式中的所有部分都进行求值。

### 1. 逻辑与（`and`）运算符的短路求值

- **规则**：对于 `A and B` 这样的表达式，Python 会先计算 `A` 的值。如果 `A` 的值为 `False`（也就是 falsy 值），那么无论 `B` 的值是什么，整个表达式的结果都必然是 `False`，此时 Python 不会再去计算 `B` 的值，直接返回 `False`；只有当 `A` 的值为 `True`（truthy 值）时，才会继续计算 `B` 的值，并将 `B` 的值作为整个表达式的结果。

### 2. 逻辑或（`or`）运算符的短路求值

- **规则**：对于 `A or B` 这样的表达式，Python 先计算 `A` 的值。如果 `A` 的值为 `True`（truthy 值），那么无论 `B` 的值是什么，整个表达式的结果都必然是 `True`，此时 Python 不会再去计算 `B` 的值，直接返回 `True`；只有当 `A` 的值为 `False`（falsy 值）时，才会继续计算 `B` 的值，并将 `B` 的值作为整个表达式的结果。

### 短路求值的好处

- **提高性能**：避免了不必要的计算，尤其是当表达式中的某些部分计算成本较高时，短路求值可以显著提高程序的运行效率。
- **避免错误**：可以利用短路求值来避免一些潜在的错误。例如，在检查一个对象的属性之前先检查该对象是否为 `None`，防止出现 `AttributeError`。